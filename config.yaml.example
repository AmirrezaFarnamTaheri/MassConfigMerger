# Example configuration for ConfigStream
# Copy to `config.yaml` and edit as needed.
# Settings are organized into sections that match the application's structure.

# Settings for Telegram integration (optional)
telegram:
  api_id: 123456
  api_hash: "YOUR_API_HASH"
  bot_token: "YOUR_BOT_TOKEN"
  allowed_user_ids:
    - 123456789
  session_path: "user.session"

# Network-related settings for HTTP requests and proxy testing
network:
  request_timeout: 10
  concurrent_limit: 20
  retry_attempts: 3
  retry_base_delay: 1.0
  connect_timeout: 3.0
  http_proxy: null # e.g., http://127.0.0.1:8080
  socks_proxy: null # e.g., socks5://127.0.0.1:1080
  headers:
    User-Agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36"
    Accept: "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
    Accept-Language: "en-US,en;q=0.5"
    Connection: "keep-alive"
    Cache-Control: "no-cache"

# Settings for filtering configurations at different stages
filtering:
  # Protocols to fetch from sources during the 'fetch' and 'full' commands.
  # An empty list means all supported protocols are fetched.
  fetch_protocols:
    - vmess
    - vless
    - trojan
    - ss
    - ssr
    - hysteria
    - hysteria2
    - tuic
    - reality
  # Regex patterns to include/exclude configs by their name/remarks.
  include_patterns: []
  exclude_patterns: []
  # Protocols to include in the final merged output.
  merge_include_protocols:
    - SHADOWSOCKS
    - TROJAN
    - REALITY
    - VMESS
    - VLESS
    - HYSTERIA2
    - TUIC
  # Protocols to exclude from the final merged output.
  merge_exclude_protocols:
    - OTHER
    - SHADOWSOCKSR
  # Country filtering (requires a GeoIP database).
  include_countries: [] # e.g., ["US", "CA"]
  exclude_countries: [] # e.g., ["IR", "CN"]
  max_ping_ms: 1000

# Settings for output files and formats
output:
  output_dir: "output"
  log_dir: "logs"
  history_db_file: "proxy_history.db"
  write_base64: true
  write_singbox: true
  write_clash: true
  write_csv: true
  write_html: false
  write_clash_proxies: true
  surge_file: null # e.g., "surge.conf"
  qx_file: null # e.g., "qx.conf"
  github_token: null # For uploading to Gist

# Settings for processing, sorting, and testing configurations
processing:
  sort_by: "latency" # 'latency' or 'reliability'
  enable_sorting: true
  enable_url_testing: true
  top_n: 0 # Keep only the top N configs, 0 to keep all
  shuffle_sources: false
  max_configs_per_source: 75000
  geoip_db: null # e.g., "/path/to/GeoLite2-Country.mmdb"
  resume_file: null
  max_retries: 3

# Settings for security features
security:
  # API key for APIVoid IP Reputation API. Get a free key at https://www.apivoid.com/
  apivoid_api_key: null
  # Number of blacklist detections required to consider an IP malicious. 0 to disable.
  blocklist_detection_threshold: 1
  # Optional shared secret required to trigger aggregation/merge from the dashboard.
  dashboard_token: null